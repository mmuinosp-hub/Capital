<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Entregas realizadas</title>
<script src="/socket.io/socket.io.js"></script>
<style>
body { font-family: Arial; margin: 20px; }
table { border-collapse: collapse; width: 100%; }
th, td { border: 1px solid #aaa; padding: 5px; text-align: center; }
nav a { margin-right: 10px; }
</style>
</head>
<body>
<nav>
  <a href="/">Inicio</a> |
  <a href="/player.html">Jugador</a> |
  <a href="/estado_jugadores.html">Estado de jugadores</a> |
  <b>Entregas realizadas</b> |
</nav>
<hr>

<h2>Entregas realizadas</h2>

    <a href="/historial_entregas.html">Historial de Entregas</a> |
  <a href="/historial_produccion.html">Historial de Producci√≥n</a>

<input id="sala" placeholder="Sala">
<button onclick="entrar()">Ver</button>

<div id="tabla"></div>

<script>
const socket = io();
let sala;

function entrar() {
  sala = document.getElementById("sala").value.trim();
  if (!sala) return alert("Introduce una sala");
  socket.emit("entrarAdmin", { sala, password: "" });
}

socket.on("actualizarEstado", (data) => {
  let html = "<table><tr><th>De</th><th>Para</th><th>Trigo</th><th>Hierro</th></tr>";
  for (const h of data.historial) {
    html += `<tr><td>${h.de}</td><td>${h.para}</td><td>${h.trigo}</td><td>${h.hierro}</td></tr>`;
  }
  html += "</table>";
  document.getElementById("tabla").innerHTML = html;
});
</script>
</body>
</html>
