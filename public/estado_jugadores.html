<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Estado de jugadores</title>
<script src="/socket.io/socket.io.js"></script>
<style>
body { font-family: Arial; margin: 20px; }
table { border-collapse: collapse; width: 100%; }
th, td { border: 1px solid #aaa; padding: 5px; text-align: center; }
nav a { margin-right: 10px; }
</style>
</head>
<body>
<nav>
  <a href="/">ğŸ  Inicio</a> |
  <a href="/admin.html">Administrador</a> |
  <a href="/player.html">Jugador</a> |
  <b>Estado de jugadores</b> |
  <a href="/entregas_realizadas.html">Entregas realizadas</a> |
  <a href="/historial_entregas.html">Historial de Entregas</a> |
  <a href="/historial_produccion.html">Historial de ProducciÃ³n</a>
</nav>
<hr>

<h2>ğŸ“Š Estado de jugadores</h2>

<input id="sala" placeholder="Sala">
<button onclick="entrar()">Ver</button>

<div id="tabla"></div>

<script>
const socket = io();
let sala;

function entrar() {
  sala = document.getElementById("sala").value.trim();
  if (!sala) return alert("Introduce una sala");
  socket.emit("entrarAdmin", { sala, password: "" });
}

socket.on("actualizarEstado", (data) => {
  let html = "<table><tr><th>Jugador</th><th>Trigo</th><th>Hierro</th></tr>";
  for (const [nombre, j] of Object.entries(data.jugadores)) {
    html += `<tr><td>${nombre}</td><td>${j.trigo.toFixed(2)}</td><td>${j.hierro.toFixed(2)}</td></tr>`;
  }
  html += "</table>";
  document.getElementById("tabla").innerHTML = html;
});
</script>
</body>
</html>
